- name: bench/loop-20-templates.yml
  hosts: all
  tasks:
  - name: Create loop templates dir
    file:
      dest: /tmp/templates
      mode: "{{ item.mode | default(omit) }}"
      state: "{{ item.state }}"
    with_items:
      - {state: absent}
      - {mode: "u=rwX,go=", state: directory}

  - name: Copy loop files
    copy:
      dest: /tmp/templates/{{item}}
      mode: u=rwx,go=rx
      content:
        Hello from {{item}}
    with_sequence: start=1 end={{end|default(20)}}
